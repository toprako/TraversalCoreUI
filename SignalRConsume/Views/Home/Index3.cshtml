
@{
    ViewData["Title"] = "Index3";
}

<h1>Ziyaretçi Grafik Sayfası</h1>

@section Scripts
{
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>

    <script type="text/javascript">
        var connection = new signalR.HubConnectionBuilder().withUrl("https://localhost:7240/VisitorHub", {
            transport: signalR.HttpTransportType.WebSockets,
            accessTokenFactory: async () => { return this.token }
        }).build();

        $("#connectionStatus").text(connection.connectionState);

        connection.start().then(() => {
            $("#connectionStatus").text(connection.connectionState);
        }).catch((err) => { console.log(err) });

    </script>
}

<div class="container">
    <br />
    <div class="alert alert-warning">
        Bağlantınızın Durumu : <b id="connectionStatus"></b>
    </div>
</div>
